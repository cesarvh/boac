<Directory /opt/python/current/app/boac/static>
    Order allow,deny
    Allow from all
    Require all granted
</Directory>

<VirtualHost *:80>
    DocumentRoot "/opt/python/current/app/boac/static"

    Header set Access-Control-Allow-Origin "*"

    ErrorLog /var/log/httpd/boac-error.log
    CustomLog /var/log/httpd/boac-access common
    CustomLog /var/log/httpd/boac-combined combined

    RewriteEngine on
    RewriteCond %{QUERY_STRING} transport=polling
    RewriteRule /(.*)$ http://localhost:5000/$1 [P]

    # Proxy
    ProxyPass         /          http://localhost:5000/ retry=0
    ProxyPreserveHost On

    # GZIP all responses using mod_deflate
    <IfModule deflate>
        SetOutputFilter DEFLATE
        AddOutputFilterByType DEFLATE text/plain
        AddOutputFilterByType DEFLATE text/html
        AddOutputFilterByType DEFLATE text/xml
        AddOutputFilterByType DEFLATE text/css
        AddOutputFilterByType DEFLATE application/json
        AddOutputFilterByType DEFLATE application/xml
        AddOutputFilterByType DEFLATE application/xhtml+xml
        AddOutputFilterByType DEFLATE application/rss+xml
        AddOutputFilterByType DEFLATE application/javascript
        AddOutputFilterByType DEFLATE application/x-javascript
    </IfModule>

    # Aggressively cache '/boac/static'
    <LocationMatch "^/boac/static">
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
    </LocationMatch>
</VirtualHost>
